<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NontoDrama</title>

<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background:#0f172a;
  color:white;
}

header {
  background:#020617;
  padding:15px;
  text-align:center;
  font-size:22px;
  font-weight:bold;
  color:#38bdf8;
}

.grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:15px;
  padding:15px;
}

.card {
  background:#020617;
  border-radius:10px;
  overflow:hidden;
  box-shadow:0 0 10px rgba(0,0,0,0.7);
  cursor:pointer;
  transition:0.3s;
}

.card:hover {
  transform:scale(1.05);
}

.card img {
  width:100%;
  height:230px;
  object-fit:cover;
}

.card h3 {
  font-size:14px;
  padding:8px;
}

.modal {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.8);
  display:none;
  justify-content:center;
  align-items:center;
}

.modal-content {
  background:#020617;
  padding:15px;
  max-width:90%;
  max-height:90%;
  overflow:auto;
  border-radius:10px;
}

button {
  background:#38bdf8;
  border:none;
  padding:10px;
  border-radius:6px;
  font-weight:bold;
  cursor:pointer;
}

.close {
  float:right;
  color:red;
  font-size:20px;
  cursor:pointer;
}
</style>
</head>

<body>

<header>ðŸŽ¬ NontoDrama</header>

<div class="grid" id="list"></div>

<div class="modal" id="modal">
  <div class="modal-content" id="detail"></div>
</div>

<script>
const proxy = "https://corsproxy.io/?";
const api = "https://api.sansekai.my.id/dramabox/latest";

fetch(proxy + api)
.then(res => res.json())
.then(data => {
  const list = document.getElementById("list");
  data.data.forEach(item => {
    list.innerHTML += `
      <div class="card" onclick="loadDetail('${item.slug}')">
        <img src="${item.thumbnail}">
        <h3>${item.title}</h3>
      </div>
    `;
  });
})
.catch(e => {
  document.body.innerHTML = "<h2 style='text-align:center'>Gagal load API ðŸ˜­</h2>";
  console.log(e);
});

function loadDetail(slug){
  fetch(proxy + "https://api.sansekai.my.id/dramabox/detail?slug=" + slug)
  .then(res => res.json())
  .then(d => {
    const drama = d.data;
    let html = `
      <span class="close" onclick="closeModal()">âœ–</span>
      <h2>${drama.title}</h2>
      <img src="${drama.thumbnail}" width="200"><br><br>
      <p>${drama.synopsis}</p>
      <h3>Episode:</h3>
    `;
    drama.episodes.forEach(ep=>{
      html += `<p><a href="${ep.url}" target="_blank" style="color:#38bdf8">${ep.title}</a></p>`;
    });

    document.getElementById("detail").innerHTML = html;
    document.getElementById("modal").style.display="flex";
  });
}

function closeModal(){
  document.getElementById("modal").style.display="none";
}
</script>

</body>
</html>
